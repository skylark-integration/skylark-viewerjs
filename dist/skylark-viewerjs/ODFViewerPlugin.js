/**
 * skylark-viewerjs - A version of viewerjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-webodf","./viewerjs"],function(e,n){return n.ODFViewerPlugin=function(){"use strict";var n=this,t=null,i=null,o=null,s=null;this.initialize=function(r,u){var a,l,c,g,f,d,m,h;i=document.getElementById("canvas"),(t=new e.odf.OdfCanvas(i)).load(u),t.addListener("statereadychange",function(){if(o=t.odfContainer().rootElement,"text"===(s=t.odfContainer().getDocumentType(o))){t.enableAnnotations(!0,!1),a=new ops.Session(t),c=a.getOdtDocument(),g=new gui.ShadowCursor(c),l=new gui.SessionController(a,"localuser",g,{}),h=l.getEventManager(),d=new gui.CaretManager(l,t.getViewport()),f=new gui.SelectionViewManager(gui.SvgSelectionView),new gui.SessionView({caretAvatarsInitiallyVisible:!1},"localuser",a,l.getSessionConstraints(),d,f),f.registerCursor(g),m=new gui.HyperlinkTooltipView(t,l.getHyperlinkClickHandler().getModifier),h.subscribe("mousemove",m.showTooltip),h.subscribe("mouseout",m.hideTooltip);var i=new ops.OpAddMember;i.init({memberid:"localuser",setProperties:{fillName:e.runtime.tr("Unknown Author"),color:"blue"}}),a.enqueue([i]),l.insertLocalCursor()}n.onLoad()})},this.isSlideshow=function(){return"presentation"===s},this.onLoad=function(){},this.fitToWidth=function(e){t.fitToWidth(e)},this.fitToHeight=function(e){t.fitToHeight(e)},this.fitToPage=function(e,n){t.fitToContainingElement(e,n)},this.fitSmart=function(e){t.fitSmart(e)},this.getZoomLevel=function(){return t.getZoomLevel()},this.setZoomLevel=function(e){t.setZoomLevel(e)},this.getPages=function(){var e,n,t,i=Array.prototype.slice.call(o.getElementsByTagNameNS({draw:"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0",presentation:"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0",text:"urn:oasis:names:tc:opendocument:xmlns:text:1.0",office:"urn:oasis:names:tc:opendocument:xmlns:office:1.0"}[t="draw"]||console.log("prefix ["+t+"] unknown."),"page")),s=[];for(e=0;e<i.length;e+=1)n=[i[e].getAttribute("draw:name"),i[e]],s.push(n);return s},this.showPage=function(e){t.showPage(e)},this.getPluginName=function(){return"WebODF"},this.getPluginVersion=function(){return"undefined"!==String(typeof e)?e.Version:"Unknown"},this.getPluginURL=function(){return"http://webodf.org"}}});
//# sourceMappingURL=sourcemaps/ODFViewerPlugin.js.map
