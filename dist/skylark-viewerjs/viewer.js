/**
 * skylark-viewerjs - A version of viewerjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./viewerjs"],function(e){return e.Viewer=function(e,t){"use strict";var n,o,i,l,a,c,s=this,u=40,d=.25,r=4,m="auto",g=!1,h=!1,w=!1,v=document.getElementById("viewer"),p=document.getElementById("canvasContainer"),f=document.getElementById("overlayNavigator"),b=document.getElementById("titlebar"),y=document.getElementById("toolbarContainer"),E=document.getElementById("toolbarLeft"),k=document.getElementById("toolbarMiddleContainer"),L=document.getElementById("scaleSelect"),F=document.getElementById("dialogOverlay"),P=document.getElementById("toolbarRight"),S=[],I=5e3;function B(){return"block"===blanked.style.display}function x(){var t,n,i,l,a,c,s;s="undefined"!==String(typeof ViewerJS_version)?ViewerJS_version:"From Source",e&&(l=e.getPluginName(),a=e.getPluginVersion(),c=e.getPluginURL()),(t=document.createElement("div")).id="aboutDialogCentererTable",(n=document.createElement("div")).id="aboutDialogCentererCell",(o=document.createElement("div")).id="aboutDialog",o.innerHTML='<h1>ViewerJS</h1><p>Open Source document viewer for webpages, built with HTML and JavaScript.</p><p>Learn more and get your own copy on the <a href="http://viewerjs.org/" target="_blank">ViewerJS website</a>.</p>'+(e?'<p>Using the <a href = "'+c+'" target="_blank">'+l+'</a> (<span id = "pluginVersion">'+a+"</span>) plugin to show you this document.</p>":"")+"<p>Version "+s+'</p><p>Supported by <a href="https://nlnet.nl" target="_blank"><br><img src="images/nlnet.png" width="160" height="60" alt="NLnet Foundation"></a></p><p>Made by <a href="http://kogmbh.com" target="_blank"><br><img src="images/kogmbh.png" width="172" height="40" alt="KO GmbH"></a></p><button id = "aboutDialogCloseButton" class = "toolbarButton textButton">Close</button>',F.appendChild(t),t.appendChild(n),n.appendChild(o),(i=document.createElement("button")).id="about",i.className="toolbarButton textButton about",i.title="About",i.innerHTML="ViewerJS",P.appendChild(i),i.addEventListener("click",function(){F.style.display="block"}),document.getElementById("aboutDialogCloseButton").addEventListener("click",function(){F.style.display="none"})}function C(e){var t,n,o=L.options,i=!1;for(n=0;n<o.length;n+=1)(t=o[n]).value===e?(t.selected=!0,i=!0):t.selected=!1;return i}function N(e,t){if(e!==s.getZoomLevel()){s.setZoomLevel(e);var n=document.createEvent("UIEvents");n.initUIEvent("scalechange",!1,!1,window,0),n.scale=e,n.resetAutoSettings=t,window.dispatchEvent(n)}}function T(){var t;e.onScroll&&e.onScroll(),e.getPageInView&&(t=e.getPageInView())&&(i=t,document.getElementById("pageNumber").value=t)}function z(e){window.clearTimeout(l),l=window.setTimeout(function(){T()},e)}function M(t,n){var o,i,l;if(o="custom"===t?parseFloat(document.getElementById("customScaleOption").textContent)/100:parseFloat(t))return N(o,!0),void z(300);switch(i=p.clientWidth-u,l=p.clientHeight-u,t){case"page-actual":N(1,n);break;case"page-width":e.fitToWidth(i);break;case"page-height":e.fitToHeight(l);break;case"page-fit":e.fitToPage(i,l);break;case"auto":e.isSlideshow()?e.fitToPage(i+u,l+u):e.fitSmart(i)}C(t),z(300)}function V(){h=!h,g&&!h&&s.togglePresentationMode()}function O(){(g||e.isSlideshow())&&(f.className="viewer-touched",window.clearTimeout(a),a=window.setTimeout(function(){f.className=""},I))}function R(){b.classList.add("viewer-touched"),y.classList.add("viewer-touched"),window.clearTimeout(c),c=window.setTimeout(function(){q()},I)}function q(){b.classList.remove("viewer-touched"),y.classList.remove("viewer-touched")}function D(){b.classList.contains("viewer-touched")?q():R()}function H(e){blanked.style.display="block",blanked.style.backgroundColor=e,q()}function _(){blanked.style.display="none",D()}function Z(e,t){var n=document.getElementById(e);n.addEventListener("click",function(){t(),n.blur()})}this.initialize=function(){var o,i,l;i=t.zoom,o=-1!==["auto","page-actual","page-width"].indexOf(i)?i:(l=parseFloat(i))&&d<=l&&l<=r?i:m,n=t.documentUrl,document.title=t.title;var a=document.getElementById("documentName");a.innerHTML="",a.appendChild(a.ownerDocument.createTextNode(t.title)),e.onLoad=function(){var n,i;document.getElementById("pluginVersion").innerHTML=e.getPluginVersion(),e.isSlideshow()?(p.classList.add("slideshow"),E.style.visibility="visible"):(k.style.visibility="visible",e.getPageInView&&(E.style.visibility="visible")),w=!0,S=e.getPages(),document.getElementById("numPages").innerHTML="of "+S.length,M(o),s.showPage((n=t.startpage,i=parseInt(n,10),isNaN(i)?1:i)),p.onscroll=T,z()},e.initialize(p,n)},this.showPage=function(t){t<=0?t=1:t>S.length&&(t=S.length),e.showPage(t),i=t,document.getElementById("pageNumber").value=i},this.showNextPage=function(){s.showPage(i+1)},this.showPreviousPage=function(){s.showPage(i-1)},this.download=function(){var e=n.split("#")[0];e+="#viewer.action=download",window.open(e,"_parent")},this.toggleFullScreen=function(){var e=v;h?document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen&&e.msRequestFullscreen()},this.togglePresentationMode=function(){var e=document.getElementById("overlayCloseButton");g?(B()&&_(),b.style.display=y.style.display="block",e.style.display="none",p.classList.remove("presentationMode"),p.onmouseup=function(){},p.oncontextmenu=function(){},p.onmousedown=function(){},M("auto")):(b.style.display=y.style.display="none",e.style.display="block",p.classList.add("presentationMode"),p.onmousedown=function(e){e.preventDefault()},p.oncontextmenu=function(e){e.preventDefault()},p.onmouseup=function(e){e.preventDefault(),1===e.which?s.showNextPage():s.showPreviousPage()},M("page-fit")),g=!g},this.getZoomLevel=function(){return e.getZoomLevel()},this.setZoomLevel=function(t){e.setZoomLevel(t)},this.zoomOut=function(){var e=(s.getZoomLevel()/1.1).toFixed(2);M(e=Math.max(d,e),!0)},this.zoomIn=function(){var e=(1.1*s.getZoomLevel()).toFixed(2);M(e=Math.min(r,e),!0)},x(),e&&(s.initialize(),document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.webkitCancelFullScreen||document.msExitFullscreen||(document.getElementById("fullscreen").style.visibility="hidden",document.getElementById("presentation").style.visibility="hidden"),Z("overlayCloseButton",s.toggleFullScreen),Z("fullscreen",s.toggleFullScreen),Z("presentation",function(){h||s.toggleFullScreen(),s.togglePresentationMode()}),document.addEventListener("fullscreenchange",V),document.addEventListener("webkitfullscreenchange",V),document.addEventListener("mozfullscreenchange",V),document.addEventListener("MSFullscreenChange",V),Z("download",s.download),Z("zoomOut",s.zoomOut),Z("zoomIn",s.zoomIn),Z("previous",s.showPreviousPage),Z("next",s.showNextPage),Z("previousPage",s.showPreviousPage),Z("nextPage",s.showNextPage),document.getElementById("pageNumber").addEventListener("change",function(){s.showPage(this.value)}),document.getElementById("scaleSelect").addEventListener("change",function(){M(this.value)}),p.addEventListener("click",O),f.addEventListener("click",O),p.addEventListener("click",D),b.addEventListener("click",R),y.addEventListener("click",R),window.addEventListener("scalechange",function(e){var t=document.getElementById("customScaleOption"),n=C(String(e.scale));t.selected=!1,n||(t.textContent=Math.round(1e4*e.scale)/100+"%",t.selected=!0)},!0),window.addEventListener("resize",function(e){w&&(document.getElementById("pageWidthOption").selected||document.getElementById("pageAutoOption").selected)&&M(document.getElementById("scaleSelect").value),O()}),window.addEventListener("keydown",function(e){var t=e.keyCode,n=e.shiftKey;if(B())switch(t){case 16:case 17:case 18:case 91:case 93:case 224:case 225:break;default:_()}else switch(t){case 8:case 33:case 37:case 38:case 80:s.showPreviousPage();break;case 13:case 34:case 39:case 40:case 78:s.showNextPage();break;case 32:n?s.showPreviousPage():s.showNextPage();break;case 66:case 190:g&&H("#000");break;case 87:case 188:g&&H("#FFF");break;case 36:s.showPage(1);break;case 35:s.showPage(S.length)}}))}});
//# sourceMappingURL=sourcemaps/viewer.js.map
